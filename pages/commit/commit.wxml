<!--pages/commit/commit.wxml-->
<view class="card">
  <view bindtap="onAddressPickerOpen">
    <text>选择地址</text>
    <van-icon name="arrow" color="#8e8e8e" />
  </view>
</view>

<view class="card products-card">
  <text>订单信息</text>
  <block wx:for="{{products}}" wx:key="sid">
    <view class="product">
      <image class="product__img" src="{{item.small_img}}" mode="widthFix" />
      <view class="product__detail">
        <view>{{item.name}} <text class="product__rule">{{item.rule}}</text></view>
        <view class="product__en-name">{{item.enname}}</view>
        <view class="product__price">¥ {{item.price}}</view>
      </view>
      <view class="product__count">x{{item.count}}</view>
    </view>
  </block>
</view>

<view class="hr">
  <view class="hr__line" />
</view>

<view class="card count-card">
  <view class="date">{{date}}</view>
  <view class="count-text">
    <text class="sum">共计 {{products.length}} 件</text>
    <text class="price-sum">合计 ¥{{priceSum}}</text>
  </view>
</view>

<view style="height: 136rpx;" />

<view class="bottom-bar">
  <van-button type="primary" size="large" color="#0037ae" round bind:click="onLoginTap">立即结算</van-button>
</view>

<van-popup show="{{ addressPickerShow }}" position="bottom" closeable bind:close="onAddressPickerClose">
  <view class="address-wrapper">
    <view class="address__title">选择地址</view>
    <block>
      <view class="address">
        <van-checkbox class="address__checkbox" value="{{ false }}" bind:change="onCheckBoxChange" data-index="{{index}}" checked-color="#0037ae" />
        <view class="address__content">
          <text class="address__info">爱丽丝 123456 <text class="address__default">默认</text></text>
          <text class="address__addr">内蒙古自治区</text>
        </view>
      </view>
    </block>
    <van-button class="address__new" type="primary" size="large" color="#0037ae" round bind:click="onNewAddressTap">新增地址</van-button>
  </view>
</van-popup>